<!DOCTYPE html>
<html>
  <head>
    <title>Info Windows</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0xTf748bvW5IyuzLW5tF7UeRcC9cYE3M&callback=initMap&libraries=&v=weekly"
      defer
    ></script>
    <style type="text/css">
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }

      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script>
      // This example displays a marker at the center of Australia.
      // When the user clicks the marker, an info window opens.
      function initMap() {
        const mapVar = new google.maps.Map(document.getElementById("map"), {
          zoom: 5,
          center: { lat: 45.4042, lng: -71.8929 },
          mapTypeId: 'hybrid',
        });

        var locations = [
          ["Toronto Pearson International Airport","YYZ", 43.6677, -79.6248],
          ["Montreal-Pierre Elliot Trudeau International Airport", "YUL", 45.4657, -73.7455],
          ["Halifax Stanfield International Airport", "YHZ", 44.8865, -63.5153],
          ["St. John's International Airport", "YYT", 47.6212, -52.7424],
          ["Ottawa International Airport", "YOW", 45.3192, -75.6692],
          ["London International Airport", "YXU", 43.0265, -81.1507],
          ["Fredericton International Airport", "YFC", 45.8728, -66.5297],
          ["Quebec city Jean Lesage International Airport", "YQB", 46.7907, -71.3886],
          ["Greater Moncton Romeo LeBlanc International Airport", "YQM", 46.1162, -64.6884],
        ];

        var flightPlanCoordinates = [
          {lat: 43.6677, lng: -79.6248},
          {lat: 45.4657, lng: -73.7455},
          {lat: 44.8865, lng: -63.5153},
          {lat: 47.6212, lng: -52.7424},
          {lat: 44.8865, lng: -63.51531},
          {lat: 45.3192, lng: -75.6692},
          {lat: 43.6677, lng: -79.6248},
          {lat: 43.0265, lng: -81.1507},
          {lat: 43.6677, lng: -79.6248},
          {lat: 45.3192, lng: -75.6692},
          {lat: 43.6677, lng: -79.6248},
          {lat: 45.8728, lng: -66.5297},
          {lat: 43.6677, lng: -79.6248},
          {lat: 45.4657, lng: -73.7455},
          {lat: 43.6677, lng: -79.6248},
          {lat: 46.7907, lng: -71.3886},
          {lat: 43.6677, lng: -79.6248},
          {lat: 46.1162, lng: -64.6684},
        ];

        // Source: https://developers.google.com/maps/documentation/javascript/examples/polyline-simple
        // Sets 2-pixel-wide red polyline showing the flight paths for the month of June. 2019. 
        var flightPath = new google.maps.Polyline({
          path: flightPlanCoordinates,
          geodesic: true,
          strokeColor: "#FF0000",
          strokeOpacity: 1.0,
          strokeWeight: 2,
        });
        
        flightPath.setMap(mapVar);
        
        const image = "images/airport.png";

        for (i = 0; i < locations.length; i++) {
          const marker = new google.maps.Marker({
            position: {lat: locations[i][2], lng: locations[i][3]},
            icon: image,
            map: mapVar,
            title: locations[i][0],
          });

          const infowindow = new google.maps.InfoWindow({
            content: `<h5>${locations[i][0]}</h5>`+ `<h6>${locations[i][1]}</h6>`,
          });

          marker.addListener("click", () => {
            infowindow.open(mapVar, marker);
          });
        };
      }

    </script>
  </head>
  <body>
    <div id="map"></div>
  </body>
</html>